#!/bin/bash
########## Define Resources Needed with SBATCH Lines ##########

#SBATCH --time=24:00:00          # limit of wall clock time - how long the job will run (same as -t)
#SBATCH --array=1-10
#SBATCH --mem=8G       # memory required per node - amount of memory (in bytes)
#SBATCH --job-name test_job         # you can give your job a name for easier identification (same as -J)


########## Command Lines to Run ##########

JOB_SEED_OFFSET=2000
RUN_ID=$((SLURM_ARRAY_TASK_ID - 1))
SEED=$((JOB_SEED_OFFSET + RUN_ID))

# Variables for convenience
EXEC="symbulation_sgp"
CONFIG_DIR="/mnt/hillaryo/home/config"
REPO_DIR=/mnt/home/hillaryo/devo_ws/project # Project should be replaced with the actual project name
RUN_DIR=<<RUN_DIR>>

# Load correct environment variables, modules, etc.
<<SETUP_HPC_ENV>>

mkdir -p ${RUN_DIR}
cd ${RUN_DIR}
cp ${CONFIG_DIR}/${EXEC}

<<RUN_CMDS>>

# Clean up run directory
rm ${RUN_DIR}/*.cfg
rm ${RUN_DIR}/${EXEC}